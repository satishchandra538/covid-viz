!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var a=n(1);multiLineGraph=n(2);document.getElementById("countrySelection");const r=document.getElementById("totalConfirmed"),l=document.getElementById("totalDeaths"),o=document.getElementById("totalRecovered"),d=document.getElementById("deathRate"),s=document.getElementById("recoveryRate"),i=document.getElementById("worldTable");countries={},window.days=0,div=d3.select("body").append("div").attr("class","tooltip");(async()=>{const e=await fetch("https://pomber.github.io/covid19/timeseries.json"),t=await e.json();countries=Object.keys(t).map(e=>[e,t[e]]);var n=d3.timeParse("%Y-%m-%d");countries.forEach(e=>{e[1].forEach(e=>{e.date=n(e.date)})}),days=countries[0][1].length;let c=0,u=0,p=0,f=0,m=0,y=0,h=0;countries.forEach(e=>{const t=e[1].length;c+=e[1][t-1].confirmed,f+=e[1][t-2].confirmed,p+=e[1][t-1].recovered,y+=e[1][t-2].recovered,u+=e[1][t-1].deaths,m+=e[1][t-2].deaths,h=h>e[1][t-2].deaths/e[1][t-2].confirmed*100?h:e[1][t-2].deaths/e[1][t-2].confirmed*100});let g=c-u-p;r.innerHTML=c+`<span class="change"> (${c-f}+)</span>`,l.innerHTML=u+`<span class="change"> (${u-m}+)</span>`,o.innerHTML=p+`<span class="change"> (${p-y}+)</span>`;let v=Math.floor(100*u/c*100)/100;d.innerHTML=v+"%";let b=Math.floor(100*p/c*100)/100;s.innerHTML=b+"%",a(g,u,p),multiLineGraph(countries,days,1),countries.forEach((e,t)=>{let n=document.createElement("tr"),a=document.createElement("td"),r=document.createElement("td"),l=document.createElement("td"),o=document.createElement("td"),d=(100*e[1][days-1].deaths/e[1][days-1].confirmed).toFixed(1);d<10&&(d=". "+d);let s=`<svg width="100" height="20">\n            <rect width=${e[1][days-1].deaths/e[1][days-1].confirmed*100/h*150} height="20" fill="brown"></rect>\n        </svg>`;a.innerHTML=""+e[0],r.innerHTML=e[1][days-1].confirmed,l.innerHTML=e[1][days-1].deaths,o.innerHTML=d+"% "+s,n.append(a,r,l,o),i.appendChild(n)})})(),window.searchCountry=()=>{var e,t,n,a;for(e=document.getElementById("tableSearchInput").value.toUpperCase(),t=i.parentNode.getElementsByTagName("tr"),a=0;a<t.length;a++)(n=t[a].getElementsByTagName("td")[0])&&((n.textContent||n.innerText).toUpperCase().indexOf(e)>-1?t[a].style.display="":t[a].style.display="none")}},function(e,t){const n=(e,t,n)=>{var a=document.getElementById("worldActivePieChart").parentElement,r=.6*a.offsetWidth,l=r/2;const o=[{label:"totalRecovered",value:n},{label:"totalActive",value:e},{label:"totalDeath",value:t}];var d=d3.select("#worldActivePieChart").attr("width",a.offsetWidth).attr("height",a.offsetWidth/1.2).append("g").attr("transform",`translate(${r/1.2},${r/1.2})`),s=d3.scaleOrdinal().domain(o.map(e=>e.label)).range(d3.schemeDark2),i=d3.pie().value((function(e){return e.value.value}))(d3.entries(o)),c=d3.arc().innerRadius(.5*l).outerRadius(.8*l),u=d3.arc().innerRadius(.9*l).outerRadius(.9*l);d.selectAll("allSlices").data(i).enter().append("path").attr("d",c).attr("fill",(function(e){return s(e.data.key)})).attr("stroke","white").style("stroke-width","2px").style("opacity",.7),d.selectAll("allPolylines").data(i).enter().append("polyline").attr("stroke","black").style("fill","none").attr("stroke-width",1).attr("points",(function(e){var t=c.centroid(e),n=u.centroid(e),a=u.centroid(e),r=e.startAngle+(e.endAngle-e.startAngle)/2;return a[0]=.95*l*(r<Math.PI?1:-1),[t,n,a]})),d.selectAll("allLabels").data(i).enter().append("text").text((function(e){return e.data.value.label})).attr("transform",(function(e){var t=u.centroid(e),n=e.startAngle+(e.endAngle-e.startAngle)/2;return t[0]=.99*l*(n<Math.PI?1:-1),"translate("+t+")"})).style("text-anchor",(function(e){return e.startAngle+(e.endAngle-e.startAngle)/2<Math.PI?"start":"end"}))};window.donutChart=n,e.exports=n},function(e,t){const n=(e,t,n)=>{var a=document.getElementById("worldMultilineChart").parentElement;const r=60,l=30,o=20;e.forEach(e=>{const t=document.createElement("option");t.value=e[0],t.innerHTML=e[0],countrySelection.appendChild(t)});const d=d3.select("#worldMultilineChart").attr("width",a.offsetWidth).attr("height",.4*a.offsetWidth+20),s=d.append("g").attr("transform",`translate(${r},${l})`),i=document.getElementById("sortBy"),c=document.getElementById("fromDayInRange");c.max=t,document.getElementById("fromDay").innerHTML=c.value,document.getElementById("toDay").innerHTML=t;var u=c.value;e.sort((e,t)=>t[1][u][i.value]-e[1][u][i.value]);const p=[];e.forEach(e=>{let n=e[0],a=[];for(let n=u;n<t;n++)a.push(e[1][n]);let r=[];r.push(n),r.push(a),p.push(r)});var f=[];n=document.getElementById("numberOfCountriesInLineChart").value;for(let e=0;e<n;e++)f.push(p[e]);"select--"!==countrySelection.value?(f=[],p.forEach((e,t)=>{e[0]===countrySelection.value&&f.push(p[t])}),document.getElementById("controlDisplay").style.display="none"):document.getElementById("controlDisplay").style.display="inline";var m=0;f.forEach(e=>{e[1].forEach(e=>{m=m<e.confirmed?e.confirmed:m})});const y=d3.scaleLinear().domain([m,0]).range([0,.4*a.offsetWidth-30]).nice(),h=d3.axisLeft(y).tickSize(80-a.offsetWidth);d.selectAll(".yaxis").remove(),s.append("g").call(h).attr("class","yaxis").attr("transform",`translate(0,${-o})`);const g=d3.scaleOrdinal().range(d3.schemeCategory10),v=d3.line().curve(d3.curveMonotoneX).x(e=>b(e.date)).y(e=>y(e.confirmed)),b=d3.scaleTime().domain(d3.extent(p[0][1],e=>e.date)).range([0,a.offsetWidth-80]),E=d3.axisBottom(b).ticks(10).tickSize(102-a.offsetHeight);d.selectAll(".xaxis").remove(),s.append("g").call(E).attr("class","xaxis").attr("transform",`translate(0,${.4*a.offsetWidth-o-30})`),d.selectAll(".country").remove();var x=s.selectAll(".country").data(f).enter().append("g").attr("class",e=>"country "+e[0]).attr("transform",`translate(${61-r},${-o})`);x.append("path").attr("fill","none").style("stroke",e=>g(e[0])).attr("stroke-width",1.5).attr("d",e=>v(e[1])),x.append("text").style("fill",e=>g(e[0])).text(e=>e[0]).style("font-weight",600).attr("x",e=>b(e[1][t-1-u].date)-80).attr("y",e=>y(e[1][t-1-u].confirmed)-2).attr("class","line-graph-country-legend"),d.selectAll(".legend-circle").remove(),x.selectAll(".legend-circles-path").data(f).enter().append("g").attr("class","legend-circle").attr("fill",e=>g(e[0])).selectAll("circle").data(e=>e[1]).enter().append("circle").attr("r",1.5).attr("cx",e=>b(e.date)).attr("cy",e=>y(e.confirmed)).on("mouseover",(function(e){div.style("display","block"),div.transition().duration(200).style("opacity",.8),div.html(`<span style="font-size:16px"><b>Confirmed</b>: ${e.confirmed}</span>\n                <br/>\n                <span style="color:black"><b>Deaths</b>: ${e.deaths}</span>\n                <br/>\n                <span style="color:black"><b>Date</b>: ${e.date.toString().substring(0,16)}</span>`).style("left",d3.event.pageX+10+"px").style("top",d3.event.pageY-28+"px"),this.attributes[0].value=3})).on("mouseout",(function(e){div.style("display","none"),this.attributes[0].value=1.5}))};window.multiLineGraph=n,e.exports=n}]);